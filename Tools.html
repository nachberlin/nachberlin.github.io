<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<meta name="robots" content="noindex">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style class="cp-pen-styles">
	h2, h3 {color:#b3b3b3;}
	section {position:relative;width:50%;float:left;}
	span.comments { color: #777; font-size: 1em; padding-top:40px; display:inline-block;}
	input {margin-left:10px;}
	input:hover {
		content: "werwewe";
	}
	#resetTextFrom {position:absolute; left:10px;top:5px;}
	textarea {
		display:block;
		width:300px; height:100px;
		margin:0 10px 10px;
		padding-top:30px;
		}
	div#text_to {width:300px; height:100px; border:1px solid #b3b3b3; overflow:auto; margin:10px;}
	#newfield {display:none;}
	span.vsego { 
				display: block;
				position: relative; 
				top: -35px; left: 320px; 
				width: 20px; height:20px;
				color: #777; 
				font-size: 0.7em; 
				}
	#vsego1 {
		position: absolute;
		top: 110px;
	}
	.left {float:left;baseline:top;}
</style>
</head>
<body>
<section>
	<input type="reset" id="resetTextFrom"  value="Очистить" onclick="textReset();">
	<textarea id="text_from" class="left" ></textarea> <span id="vsego1" class="vsego"></span> 
	<input type="submit" id="" onclick="showFrom2();" value=">>" class="left">
	<div class="left" id="newfield">
		<textarea id="text_from2"></textarea>
		<input type="submit" onclick="joinFields();" value="JOIN" data-text="Соединить содержимое в словосочетания">
	</div>
	<br style="clear:both">
	<div id="text_to">
		<span id="text_to_span"></span>
	</div>
	<span id="vsego2" class="vsego"></span>
	<input type="submit" id="" onclick="textToSmall();" value="To small case">
	<input type="submit" id="" onclick="unique();" value="Удалить повторы">
	<small><input type="checkbox" name="tosort" id="tosort">Сортировать по алфавиту</small>
	<p><strong>Не забывать про Яндекс Маркет!</strong></p>
</section>
<section>
	<h2>Стоп-слова</h2>
	<span id="stopwords" class="stopwords" onclick="selectText(this);">"продам", "породам", "продаю", "отдам", "отдаю", в наличии, вналичии, выкуп, закуп, сп, орг сбор, "обменяю", "поменяю", "обменяюсь", "поменяюсь",  объявление на avito, промокод дня, server="http://www.jujuju.ru/", "в ассортименте", </span>

	<h3>Стоп-слова для компьютерных программ</h3>
	<span id="stopkomp" class="stopwords" onclick="selectText(this);">journal="http://nnm-club.me/", торент, торрент, torrent, вакансия, ищу работу, "требуются", требуется разработчик, требуется программист, </span>

	<h3>Стоп-слова для косметики</h3>
	<span id="stopkosm" class="stopwords" onclick="selectText(this);">код товара, аптечная закупка, black mask, наш интернет магазин, journal="http://kosmetika-sale.livejournal.com/", "АПТЕЧНАЯ КОСМЕТИКА КЭЖ", journal="http://vk.com/club40225923", journal="http://vk.com/club77573685", journal="http://vk.com/club46867429",</span>

	<h3>Стоп-слова для магазинов игрушек</h3>
	<span id="stoptoys" class="stopwords" onclick="selectText(this);">"bit.ly", "cinema", "t.co", "Любимым деткам доставим радость", "заказать", "обменяю", "обменяюсь", "отдам", "отдаю", "поменяю", "поменяюсь", "предлагаю", "продам", "продаю", "р.", Convention Center, Movie, author="http://vk.com/club127154075", author="http://vk.com/club127154362", author="http://vk.com/club127154647", episode, journal="http://vk.com/club100428470", journal="http://vk.com/club108505287", journal="http://vk.com/club127154647", journal="http://vk.com/club51036509", lego_laso, season, server="http://ecoshopsforum.xyz/", server="http://shop-t.ru/", анимационный, анимация, артикул, бесплатно, в ассорт, в ассортименте, в наличии, вналичии, выкуп, грн, заказ, закуп, канал, капкейк, квартира NERF в России, кино*, конкурс, купон, мне понравилось видео, мульт*, наименование, начальная цена,  объявление на avito, озвучка, онлайн, оптовая закупка, орг сбор, отзыв, полный ассортимент, приз, призовой, прокат, промокод дня, режиссер, руб, сезон, секс, сериал*, серия, скачать, скидка, смотреть видео, сп, субтитры, сценарий, сценарист, титры, торент, торрент, торт, трейлер, фильм, цена обзор инструкция, цена по акции, фильм</span>

	<h3>Аренда</h3>
	<span id="arenda" class="stopwords" onclick="selectText(this);">предпочтение некурящей, "сдам", "сдаю", "сниму", "сдается на длительный срок", комн квартира, комнатная, сдается на долгий срок, "сдаем", изолированная комната, двухкомнатная, однокомнатная, трехкомнатная, четырехкомнатная, "сдают", от собственника, сдается квартира, сдается комната, сдается студия, </span>

	<h3>Новости</h3>
	<span  id="news" class="stopwords" onclick="selectText(this);">обзор прессы, по сообщению, "сообщает", информирует, информационное агентство, реализация закона, worldnewsday, news, novosti, итар тасс</span>
	<h3>Спорт</h3>
	<span id="sport" class="stopwords" onclick="selectText(this);">ледовый дворец, хоккей, хоккейный, шайба, штанга, тренер, полуфинал, финал, хоккеист, хокеист, чемпионат, динамо, игра, команда, вхл, чемпион, напротив завода, юхл, лед, первый период, второй период, матч, гол, тхк, обыграть, победа, переиграть, болельщик, спорт, спортзал, арена, ворота, трансляция,  крылья советов</span>
	
	<h3>Негативный окрас</h3>
	<span id="negative" class="stopwords" onclick="selectText(this);">проблемы, проблемный, сервис, шизанутый, пипец, хамский, хамство, хамло, быдло, треш, трэш, твари, сволочи, гады, уроды, уродский, адски, пиздец, пиздецовый, аццкий, хуевый, фиговый, плохо, ужасно, отвратительно, безобразно, говно, говнище, дерьмо, дерьмовый, говенный, говеный, </span>

	<h3>Казахстан</h3>
	<span id="kazakhstan" class="stopwords" onclick="selectText(this);">казахстан, казахстанский, тенге, тг, тнг, алматы, алматинский, астана, астанинский, шымкент, шымкентский, караганда, актобе, павлодар, костанай, усть каменогорск, уральск, карагандинский, актобинский, павлодарский, костанайский, усть каменогорский</span>

	<h3>Спам про часы</h3>
	<span id="watches" class="stopwords" onclick="selectText(this);">часы новый год, играя в казино вулкан, стильные часы для, брендовые часы, элегантные мужские часы, престижные мужские часы, превосходные мужские часы, потрясающие наручные часы, лучшие наручные часы, часы Emporio Armani, наручные часы Armani, любимому мужустили bmw бьянка, стили дисков bmw тренда уровни, царевич часы клайв, block часы ядерная, мужские часы Armani, бумер под кунсей ролл, на майнкрафт, блокады блокировка,</span>
	
	<h3>Дешевые аналоги лекарств</h3>
	<span id="analog" class="stopwords" onclick="selectText(this);">"препараторов с идентичным составом", "препаратов с идентичным составом", "Вот как надо общаться в аптеке", "аналоги лекарств", "Многие дорогостоящие лекарственные препараты", "Важливо знати кожному", "дешевые аналоги", "замена дорогих лекарств", "Белосалик (380руб) и Акридерм СК", "Белосалик (380руб) = Акридерм СК", "аналоги дорогих лекарств",</span>
	
	<span class="comments">//todo:
	<ul><li>подключение стоп-слов на разные темы</li>
	<li>возможность добавления своих стоп-слов</li>
	<li>второе поле textarea для удаления из первого каких-то слов</li></ul>
	Ссылка на редактирование <a href="https://github.com/yan-tar/yan-tar.github.io/edit/master/Tools.html">тут</a>
	</span>	
	<p><small>$(".pbebc1c-link.ng-binding").each(function(i,elem){console.log(elem.getAttribute("href"))})</small></p>
</section>

<script>
var joinFields = function(){
	var field1 = document.getElementById('text_from').value;
	var field2 = document.getElementById('text_from2').value;
	var strings1 = field1.split(', ');
	var strings2 = field2.split(', ');
	var newString = [];
	for (var i = 0; i < strings1.length; i++) {
		for (var z = 0; z < strings2.length; z++)
			{			
			newString.push(strings1[i] + " " +strings2[z]);
			};
	  };
	var vsego2 = newString.length;
	document.getElementById('text_to_span').innerHTML = newString.join(", ");
	document.getElementById('vsego2').innerHTML = vsego2;
}

textToSmall = function () {
    var text_from = document.getElementById('text_from').value;
    document.getElementById('text_to_span').innerHTML = text_from.toLowerCase();
	return false;
};



document.getElementById('text_to').addEventListener('click', function() { //выделение текста в диве text_to
    if (window.getSelection) {
        let range = document.createRange();
        range.selectNode(document.getElementById('text_to_span'));
		let selection = window.getSelection();
	    selection.removeAllRanges();
		selection.addRange(range);
		}
});
	
	
var stopWords = document.querySelector('#analog');
stopWords.addEventListener('click', selectText(stopWords));//отказывается работать (
	
function selectText(n){
	if (window.getSelection) {
        let range = document.createRange();
        range.selectNode(n);
		let selection = window.getSelection();
	    selection.removeAllRanges();
		selection.addRange(range);
		}
}

textReset = function(){
	document.getElementById('text_from').value ="";
	return false;
}

//разбивает и сортирует по алфавиту, если нужна сортировка
function tosort(n){ 
	if(typeof n != "object"){ n = n.split(', ');}
	if (document.getElementById('tosort').checked == true) 	{ n.sort();	}
	return n;
}

//оставляет только уникальные слова
function unique() {
	var text_from = document.getElementById('text_from').value;
	var strings = tosort(text_from);
	var obj = {};
	
	document.getElementById('vsego1').innerHTML = strings.length;
	  for (var i = 0; i < strings.length; i++) {
		var str = strings[i];
		obj[str] = true; // запомнить строку в виде свойства объекта 
	  }
	//надо бы превратить обратно в строку
	var newstr = Object.keys(obj).join(", ");

    document.getElementById('text_to_span').innerHTML = newstr;
	document.getElementById('vsego2').innerHTML = Object.keys(obj).length;
	return false;
}

function showFrom2(){
	var newfield = document.getElementById('newfield');
	if (newfield.style.display=="block")
	{
		newfield.style.display = "none";
	}
	else {
		newfield.style.display = "block";
	}
}


</script>
</body></html>
